<%
# |==============|
# |              |
# | Path         |  ::  < %= path % >
# | Dependencies |  ::  < %= dependencies.join ' ' % >
# |              |
# |==============|
%>
<%= path %>.o: \
  <%= path %> \<%
    dependencies.each do |dep| %>
  <%= dep %> \<% end %>

	cat <%= path %> | \
	  grep -v -E -e '^[[:space:]]*\#[[:space:]]*pragma[[:space:]]*once' | \
	  sed -r -e '1a# 1 "<%= path %>"' | \
	  sed -r -e '$$anamespace { static const auto __file_name = __FILE__\; }' | \
	  ${CXX} ${CPPFLAGS} ${CXXFLAGS} -c -pipe -o <%= path %>.o -xc++ -
